<!--
- Nome: Pasquale
- Cognome: Pagano
- Matricola: 0124003182
- Corso di Laurea: Informatica
- Anno Accademico: 2025/2026
        &
- Nome: Daniele
- Cognome: Mele
- Matricola: 0124003006
- Corso di Laurea: Informatica
- Anno Accademico: 2025/2026
-->

<!DOCTYPE html>
<html lang="it">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard SysAdmin</title>

    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard_sysadmin.css') }}">
</head>

<body>

    <div class="app-layout dashboard-card">

        <div class="header-strip">
            <div class="header-content">
                <img src="{{ url_for('static', filename='img/logo.png') }}" class="logo-contained" alt="Logo Azienda">
                <span class="company-name">Azienda Edile</span>
            </div>

            <button onclick="logout()" class="btn-logout">
                <span>Esci</span>
                <svg xmlns="http://www.w3.org/2000/svg" class="logout-icon" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                </svg>
            </button>
        </div>

        <div class="dashboard-header-card">
            <div class="dashboard-title">
                <h1>Gestione amministratori aziendali</h1>
                <p>Amministratori che utilizzano il gestionale</p>
            </div>

            <div class="header-actions">
                <button onclick="openAddModal()" class="add-btn">
                    Aggiungi Amministratore
                </button>
            </div>
        </div>

        <div class="table-card">
            <div class="table-responsive">
                <table class="admin-table">
                    <thead>
                        <tr>
                            <th>Codice Fiscale</th>
                            <th>Nome Azienda</th>
                            <th>Nome</th>
                            <th>Cognome</th>
                            <th>Data nascita</th>
                            <th>Telefono</th>
                            <th style="text-align: center;">Azione</th>
                        </tr>
                    </thead>
                    <tbody id="admin-table-body">
                    </tbody>
                </table>
            </div>
        </div>

    </div>
    <div id="add-admin-modal" class="modal hidden">
        <div class="modal-content">
            <h3 class="modal-title">Nuovo Amministratore</h3>

            <small id="err_new_cf" class="error-msg hidden">Il codice fiscale deve essere di 16 caratteri.</small>
            <input id="new_cf" class="input-field" type="text" placeholder="Codice Fiscale">

            <small id="err_new_azienda" class="error-msg hidden">Nome azienda obbligatorio</small>
            <input id="new_azienda" class="input-field" type="text" placeholder="Nome Azienda">

            <small id="err_new_nome" class="error-msg hidden">Nome obbligatorio</small>
            <input id="new_nome" class="input-field" type="text" placeholder="Nome">

            <small id="err_new_cognome" class="error-msg hidden">Cognome obbligatorio</small>
            <input id="new_cognome" class="input-field" type="text" placeholder="Cognome">

            <small id="err_new_password" class="error-msg hidden">Password obbligatoria</small>
            <input id="new_password" class="input-field" type="password" placeholder="Password">

            <small id="err_new_dataNascita" class="error-msg hidden">Data non valida</small>
            <input id="new_dataNascita" class="input-field" type="date">

            <small id="err_new_numeroTelefono" class="error-msg hidden">Telefono obbligatorio</small>
            <input id="new_NumeroTelefono" class="input-field" type="text" placeholder="Numero di telefono">

            <div class="modal-actions">
                <button onclick="closeAddModal()" class="cancel-btn">Annulla</button>
                <button onclick="createAdmin()" class="confirm-btn">Crea</button>
            </div>
        </div>
    </div>

    <div id="edit-admin-modal" class="modal hidden">
        <div class="modal-content">
            <h3 class="modal-title">Modifica Amministratore</h3>

            <label class="form-label">Codice Fiscale</label>
            <input id="edit_cf" class="input-field disabled-input" type="text" disabled>

            <label class="form-label">Azienda</label>
            <input id="edit_azienda" class="input-field disabled-input" type="text" disabled>

            <small id="err_edit_nome" class="error-msg hidden">Nome obbligatorio</small>
            <input id="edit_nome" class="input-field" type="text" placeholder="Nome">

            <small id="err_edit_cognome" class="error-msg hidden">Cognome obbligatorio</small>
            <input id="edit_cognome" class="input-field" type="text" placeholder="Cognome">

            <small id="err_edit_password" class="error-msg hidden">Password obbligatoria</small>
            <input id="edit_password" class="input-field" type="password" placeholder="Nuova password">

            <small id="err_edit_dataNascita" class="error-msg hidden">Data non valida</small>
            <input id="edit_dataNascita" class="input-field" type="date">

            <small id="err_edit_numeroTelefono" class="error-msg hidden">Telefono obbligatorio</small>
            <input id="edit_NumeroTelefono" class="input-field" type="text" placeholder="Numero di telefono">

            <div class="modal-actions">
                <button onclick="closeEditModal()" class="cancel-btn">Annulla</button>
                <button onclick="updateAdmin()" class="confirm-btn">Salva Modifiche</button>
            </div>
        </div>
    </div>

    <div id="delete-modal" class="modal hidden">
        <div class="modal-content delete-layout">
            <div class="icon-circle-red">
                <svg xmlns="http://www.w3.org/2000/svg" class="error-icon" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                        d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                </svg>
            </div>

            <h3 class="modal-title">Conferma Eliminazione</h3>
            <p id="delete-message" class="modal-message">Sei sicuro di voler procedere?</p>

            <div class="modal-actions-center">
                <button onclick="closeDeleteModal()" class="cancel-btn">Annulla</button>
                <button id="confirm-delete-btn" class="delete-btn">Elimina definitivamente</button>
            </div>
        </div>
    </div>

    <div id="success-modal" class="modal hidden">
        <div class="modal-content success-layout">
            <div class="icon-circle-green">
                <svg xmlns="http://www.w3.org/2000/svg" class="success-icon" fill="none" viewBox="0 0 24 24"
                    stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                </svg>
            </div>

            <h3 class="modal-title">Operazione Completata</h3>
            <p id="success-message" class="modal-message">Operazione eseguita con successo.</p>

            <button onclick="closeSuccessModal()" class="confirm-btn">OK</button>
        </div>
    </div>

    <script src="{{ url_for('static', filename='dashboard_sysadmin.js') }}"></script>
</body>

</html>