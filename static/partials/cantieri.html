<!--
- Nome: Pasquale
    - Cognome: Pagano
    - Matricola: 0124003182
    - Corso di Laurea: Informatica
    - Anno Accademico: 2025/2026
            &
    - Nome: Daniele
    - Cognome: Mele
    - Matricola: 0124003006
    - Corso di Laurea: Informatica
    - Anno Accademico: 2025/2026
-->

<div class="section-content text-center z-10 mx-auto">

    <div class="header-strip flex items-center justify-start">
        <div class="flex items-center header-content">
            <img src="/static/img/logo.png" class="logo-contained">
            <span id="nome_azienda" class="ml-4 font-bold text-2xl"></span>
        </div>
    </div>

    <div class="flex items-center justify-between mb-5">
        <h1 class="text-3xl font-bold text-left m-0">Gestione cantieri</h1>
        <button onclick="openAddCantiereModal()" class="add-btn">
            Aggiungi Cantiere
        </button>
    </div>

    <div class="table-card">
        <table class="admin-table">
            <thead>
                <tr class="text-left border-b border-gray-300/50">
                    <th class="pb-3">Luogo</th>
                    <th class="pb-3">Descrizione</th>
                    <th class="pb-3">QR</th>
                    <th class="pb-3">Stato</th>
                    <th class="pb-3 text-center">Azione</th>
                </tr>
            </thead>
            <tbody id="cantieri-table-body">
            </tbody>
        </table>
    </div>
</div>

<div id="add-cantiere-modal" class="modal hidden">
    <div class="modal-content">
        <h3 class="text-xl font-bold mb-4">Nuovo Cantiere</h3>

        <small id="err_new_nome_cantiere" class="text-red-500 text-sm hidden">Il nome del cantiere è
            obbligatorio</small>
        <input id="new_nome_cantiere" class="input-field" type="text"
            placeholder="Nome Cantiere (es. Ristrutturazione Villa)">

        <small id="err_new_committente" class="text-red-500 text-sm hidden">Il committente è obbligatorio</small>
        <input id="new_committente" class="input-field" type="text" placeholder="Nome Committente">

        <small id="err_new_luogo" class="text-red-500 text-sm hidden">Il luogo è obbligatorio</small>
        <input id="new_luogo" class="input-field" type="text" placeholder="Luogo / Indirizzo">

        <label class="text-left block text-sm font-bold text-gray-700 mt-2">Data Inizio</label>
        <small id="err_new_dataInizio" class="text-red-500 text-sm hidden">Data inizio non valida</small>
        <input id="new_dataInizio" class="input-field" type="date">

        <label class="text-left block text-sm font-bold text-gray-700 mt-2">Data Fine Prevista</label>
        <input id="new_dataFine" class="input-field" type="date">

        <div class="flex justify-end mt-4 gap-3">
            <button onclick="closeAddCantiereModal()" class="cancel-btn">Annulla</button>
            <button onclick="createCantiere()" class="confirm-btn">Crea</button>
        </div>
    </div>
</div>

<div id="edit-cantiere-modal" class="modal hidden">
    <div class="modal-content">
        <h3 class="text-xl font-bold mb-4">Modifica Cantiere</h3>

        <input type="hidden" id="edit_cantiere_id">

        <small id="err_edit_nome_cantiere" class="text-red-500 text-sm hidden">Il nome del cantiere è
            obbligatorio</small>
        <input id="edit_nome_cantiere" class="input-field" type="text" placeholder="Nome Cantiere">

        <small id="err_edit_committente" class="text-red-500 text-sm hidden">Il committente è obbligatorio</small>
        <input id="edit_committente" class="input-field" type="text" placeholder="Nome Committente">

        <small id="err_edit_luogo" class="text-red-500 text-sm hidden">Il luogo è obbligatorio</small>
        <input id="edit_luogo" class="input-field" type="text" placeholder="Luogo / Indirizzo">

        <label class="text-left block text-sm font-bold text-gray-700 mt-2">Data Inizio</label>
        <small id="err_edit_dataInizio" class="text-red-500 text-sm hidden">Data inizio non valida</small>
        <input id="edit_dataInizio" class="input-field" type="date">

        <label class="text-left block text-sm font-bold text-gray-700 mt-2">Data Fine Prevista</label>
        <input id="edit_dataFine" class="input-field" type="date">

        <div class="flex justify-end mt-4 gap-3">
            <button onclick="closeEditCantiereModal()" class="cancel-btn">Annulla</button>
            <button onclick="updateCantiere()" class="confirm-btn">Salva</button>
        </div>
    </div>
</div>

<div id="delete-cantiere-modal" class="modal hidden">
    <div class="modal-content">
        <h3 class="text-xl font-bold mb-4">Conferma Eliminazione</h3>

        <p class="text-gray-700 mb-5">
            Sei sicuro di voler eliminare questo cantiere?
        </p>

        <div class="flex justify-end mt-4 gap-3">
            <button onclick="closeDeleteCantiereModal()" class="cancel-btn">Annulla</button>
            <button id="confirm-delete-cantiere-btn" class="delete-btn">Elimina</button>
        </div>
    </div>
</div>

<div id="success-modal" class="modal hidden">
    <div class="modal-content flex flex-col items-center text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-600 mb-3 mx-auto" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>

        <h3 class="text-xl font-bold mb-2">Operazione completata</h3>
        <p id="success-message" class="text-gray-700 mb-5">Cantiere salvato con successo</p>

        <button onclick="closeSuccessModal()" class="confirm-btn px-6">OK</button>
    </div>
</div>