<!--
- Nome: Pasquale
    - Cognome: Pagano
    - Matricola: 0124003182
    - Corso di Laurea: Informatica
    - Anno Accademico: 2025/2026
            &
    - Nome: Daniele
    - Cognome: Mele
    - Matricola: 0124003006
    - Corso di Laurea: Informatica
    - Anno Accademico: 2025/2026
-->

<div class="section-content text-center z-10 mx-auto">

    <!-- Striscia bianca che simula una navbar -->
    <div class="header-strip flex items-center justify-start">
        <div class="flex items-center header-content">
            <img src="/static/img/logo.png" class="logo-contained">
            <span id="nome_azienda" class="ml-4 font-bold text-2xl"></span>
        </div>
    </div>

    <!-- PULSANTE AGGIUNGI OPERAIO -->
    <div
        class="bg-white/60 backdrop-blur-md border border-white/50 rounded-xl p-4 mb-6 shadow-sm flex flex-col md:flex-row items-center justify-between gap-4 shrink-0">

        <div class="text-left w-full md:w-auto">
            <h1 class="text-2xl font-bold text-gray-800 m-0 leading-tight">Gestione operai</h1>
            <p class="text-gray-500 text-sm m-0 font-medium">Operai che lavorano per la tua azienda</p>
        </div>

        <div class="relative w-full md:w-auto">
                <button onclick="openAddModal()" class="add-btn">
                    Aggiungi Operaio
                </button>
            </div>
    </div>  

    <!-- TABELLA OPERAI -->
    <div class="table-card">
        <table class="admin-table">
            <thead>
                <tr class="text-left border-b border-gray-300/50">
                    <th class="pb-3">Codice Fiscale</th>
                    <th class="pb-3">Nome</th>
                    <th class="pb-3">Cognome</th>
                    <th class="pb-3">Data Nascita</th>
                    <th class="pb-3">Numero di telefono</th>
                    <th class = "pb-3">Ruolo</th>
                    <th class="pb-3 text-center">Azione</th>
                </tr>
            </thead>
            <tbody id="operai-table-body"></tbody>
        </table>
    </div>
</div>

<!-- MODALE AGGIUNGI OPERAIO -->
<div id="add-operaio-modal" class="modal hidden">
    <div class="modal-content">
        <h3 class="text-xl font-bold mb-4">Nuovo Operaio</h3>

        <small id = "err_new_cf" class = "text-red-500 text-sm hidden">Il codice fiscale deve essere di 16 cifre</small>
        <input id="new_cf" class="input-field" type="text" placeholder="Codice Fiscale">

        <small id = "err_new_nome" class = "text-red-500 text-sm hidden">Il nome è obbligatorio</small>
        <input id="new_nome" class="input-field" type="text" placeholder="Nome">

        <small id = "err_new_cognome" class = "text-red-500 text-sm hidden">Il cognome è obbligatorio</small>
        <input id="new_cognome" class="input-field" type="text" placeholder="Cognome">

        <small id = "err_new_password" class = "text-red-500 text-sm hidden">La password deve essere obbligatoria</small>
        <input id="new_password" class="input-field" type="password" placeholder="Password">

        <small id = "err_new_dataNascita" class = "text-red-500 text-sm hidden">Data nascita non è valida</small>
        <input id="new_dataNascita" class="input-field" type="date">

        <small id = "err_new_numeroTelefono" class = "text-red-500 text-sm hidden">Il numero di telefono è obbligatorio</small>
        <input id="new_NumeroTelefono" class="input-field" type="text" placeholder="Numero di telefono">

        <!-- CHECKBOX -->
        <label class="flex items-center gap-2 mt-2">
            <input type="checkbox" id="new_capocantiere" class="h-4 w-4">
            <span class="text-sm text-gray-700">Capocantiere</span>
        </label>

        <div class="flex justify-end mt-4 gap-3">
            <button onclick="closeAddModal()" class="cancel-btn">Annulla</button>
            <button onclick="createOperaio()" class="confirm-btn">Crea</button>
        </div>
    </div>
</div>

<!-- MODALE MODIFICA OPERAIO -->
<div id="edit-operaio-modal" class="modal hidden">
    <div class="modal-content">
        <h3 class="text-xl font-bold mb-4">Modifica Operaio</h3>

        <input id="edit_cf" class="input-field" type="text" disabled>

        <small id = "err_edit_nome" class = "text-red-500 text-sm hidden">Il nome è obbligatorio</small>
        <input id="edit_nome" class="input-field" type="text" placeholder="Nome">
        
        <small id = "err_edit_cognome" class = "text-red-500 text-sm hidden">Il cognome è obbligatorio</small>
        <input id="edit_cognome" class="input-field" type="text" placeholder="Cognome">

        <small id = "err_edit_password" class = "text-red-500 text-sm hidden">La password è obbligatoria</small>
        <input id="edit_password" class="input-field" type="password" placeholder="Nuova password">
        
        <small id = "err_edit_dataNascita" class = "text-red-500 text-sm hidden">Data di nascita non valida</small>
        <input id="edit_dataNascita" class="input-field" type="date">

        <small id = "err_edit_numeroTelefono" class = "text-red-500 text-sm hidden">Il numero di telefono è obbligatorio</small>
        <input id="edit_NumeroTelefono" class="input-field" type="text" placeholder="Numero di telefono">

        <!-- CHECKBOX -->
        <label class="flex items-center gap-2 mt-2">
            <input type="checkbox" id="edit_capocantiere" class="h-4 w-4">
            <span class="text-sm text-gray-700">Capocantiere</span>
        </label>

        <div class="flex justify-end mt-4 gap-3">
            <button onclick="closeEditModal()" class="cancel-btn">Annulla</button>
            <button onclick="updateOperaio()" class="confirm-btn">Salva</button>
        </div>
    </div>
</div>

<!-- MODALE DI SUCCESSO -->
<div id="success-modal" class="modal hidden">
    <div class="modal-content flex flex-col items-center text-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 text-green-600 mb-3 mx-auto" fill="none"
            viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
        </svg>

        <h3 class="text-xl font-bold mb-2">Operazione completata</h3>
        <p id="success-message" class="text-gray-700 mb-5">Operazione completata</p>

        <button onclick="closeSuccessModal()" class="confirm-btn px-6">OK</button>
    </div>
</div>

<!-- MODALE CONFERMA ELIMINAZIONE -->
<div id="delete-modal" class="modal hidden">
    <div class="modal-content">
        <h3 class="text-xl font-bold mb-4">Conferma Eliminazione</h3>

        <p id="delete-message" class="text-gray-700 mb-5">
            Sei sicuro di voler eliminare questo operaio?
        </p>

        <div class="flex justify-end mt-4 gap-3">
            <button onclick="closeDeleteModal()" class="cancel-btn">Annulla</button>
            <button id="confirm-delete-btn" class="delete-btn">Elimina</button>
        </div>
    </div>
</div>
